---
title: "Rapport"
author: "Ahamad MOHAMMAD; Minko Bikono NEIL-JOVY; Simon GELBART; Willen AMICHE"
date: "`r Sys.Date()`"
output:
  prettydoc::html_pretty:
    theme: cayman       
    highlight: github   
    toc: true
    toc_depth: 3
encoding: UTF-8
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = FALSE,     
  warning = FALSE,  
  message = FALSE   
)
```



## **Introduction**

Notre objectif est d‚Äôexplorer l‚Äôimpact des strat√©gies de recrutement sur les performances sportives des clubs et joueurs. En combinant des statistiques individuelles, collectives et des donn√©es de transferts, nous chercherons √† identifier les tendances qui influencent la r√©ussite des √©quipes sur plusieurs saisons. 


### **üìä Description des variables**

#### - üßç‚Äç‚ôÇÔ∏è Player Stats 2021-2022 (`2021-2022 Football Player Stats.csv`)

143 variables ‚Äì chaque ligne correspond √† un joueur pour la saison 2021-2022.

| Variable          | Type      | Description approximative |
|-------------------|-----------|----------------------------|
| `Rk`              | int64     | Rang ou ID du joueur       |
| `Player`          | object    | Nom du joueur              |
| `Nation`          | object    | Nationalit√©                |
| `Pos`             | object    | Poste                      |
| `Squad`           | object    | Club                       |
| `Comp`            | object    | Comp√©tition principale     |
| `Age`             | object    | √Çge                        |
| `Born`            | object    | Ann√©e de naissance         |
| ...               | ...       | ...et plus de 130 autres statistiques de jeu : buts, passes, tirs, dribbles, fautes, tacles, interceptions, passes progressives, etc. |
| `AerWon`          | float64   | Duels a√©riens gagn√©s       |
| `AerLost`         | float64   | Duels a√©riens perdus       |
| `AerWon%`         | float64   | Pourcentage de duels a√©riens gagn√©s |

---

#### - üèüÔ∏è Team Stats 2021-2022 (`2021-2022 Football Team Stats.csv`)

20 variables ‚Äì chaque ligne correspond √† une √©quipe.

| Variable          | Type      | Description |
|------------------|-----------|-------------|
| `Rk`             | int64     | Rang        |
| `Squad`          | object    | Nom du club |
| `Country`        | object    | Pays        |
| `LgRk`           | int64     | Classement dans la ligue |
| `MP`, `W`, `D`, `L` | int64  | Matchs jou√©s, Victoires, Nuls, D√©faites |
| `GF`, `GA`, `GD` | int64     | Buts pour, contre, diff√©rence |
| `Pts`, `Pts/G`   | int64 / float64 | Points et moyenne par match |
| `xG`, `xGA`, `xGD`, `xGD/90` | float64 | Donn√©es d‚Äôexpected goals |
| `Attendance`     | int64     | Affluence moyenne |
| `Top Team Scorer`| object    | Meilleur buteur |
| `Goalkeeper`     | object    | Gardien principal |

---

#### - üèüÔ∏è Team Stats 2022-2023 (`2022-2023 Football Team Stats.csv`)

M√™me structure et signification que pour 2021-2022, mais avec la saison suivante.

---

#### - üîÑ Transfers √ât√© 2022 (`2022_2023_football_summer_transfers.csv`)

11 variables ‚Äì chaque ligne correspond √† un transfert.

| Variable        | Type    | Description |
|----------------|---------|-------------|
| `name`         | object  | Nom du joueur transf√©r√© |
| `position`     | object  | Poste            |
| `age`          | object  | √Çge              |
| `market_value` | object  | Valeur estim√©e   |
| `country_from` | object  | Pays de d√©part   |
| `league_from`  | object  | Ligue de d√©part  |
| `club_from`    | object  | Club de d√©part   |
| `country_to`   | object  | Pays d‚Äôarriv√©e   |
| `league_to`    | object  | Ligue d‚Äôarriv√©e  |
| `club_to`      | object  | Club d‚Äôarriv√©e   |
| `fee`          | object  | Montant du transfert (peut contenir "Free", "Loan", etc.) |

---

## **Analyse et r√©ponses aux questions**


```{r chargement-librairies, message=FALSE}
# Chargement des packages n√©cessaires

library(tidyverse)
library(ggplot2)
```


```{r importation-donnees, message=FALSE, warning=FALSE}
# Importation des donn√©es

player_stats_2021_2022 <- read.csv("data/2021-2022 Football Player Stats.csv", sep = ";", fileEncoding = "ISO-8859-1")
team_stats_2021_2022 <- read.csv("data/2021-2022 Football Team Stats.csv", sep = ";", fileEncoding = "ISO-8859-1")
team_stats_2022_2023 <- read.csv("data/2022-2023 Football Team Stats.csv", sep = ";", fileEncoding = "ISO-8859-1")
transfers_2022 <- read.csv("data/2022_2023_football_summer_transfers.csv", sep = ",", fileEncoding = "ISO-8859-1")
```

---

### **Question 1 : Quels clubs ont le plus recrut√© par poste (top 20) ?**

#### üéØ Objectif:
Identifier les **20 clubs les plus actifs** lors du mercato d‚Äô√©t√© 2022 en termes de nombre de recrues, puis visualiser quels postes ont √©t√© cibl√©s en priorit√© par ces clubs. Cela permet de mieux comprendre les **strat√©gies de renforcement** des effectifs selon les lignes de jeu (d√©fense, milieu, attaque).

#### üß™ Hypoth√®se :
Nous supposons que les clubs ayant termin√© en bas de classement ou nouvellement promus ont davantage recrut√©, notamment en d√©fense et au milieu, dans une logique de **renforcement pour assurer le maintien**. √Ä l‚Äôinverse, les clubs plus stables ou ambitieux auraient fait un recrutement plus cibl√© et r√©parti entre les lignes.



```{r message=FALSE}
# Code

# Nettoyage de base
transfers_clean <- transfers_2022 %>%
  filter(!is.na(club_to), !is.na(position), position != "")

# Regrouper et compter
recrutements_par_poste <- transfers_clean %>%
  group_by(club_to, position) %>%
  summarise(nb_recrues = n(), .groups = "drop")

# Garder uniquement les 20 clubs ayant recrut√© le plus globalement
top_clubs <- recrutements_par_poste %>%
  group_by(club_to) %>%
  summarise(total_recrues = sum(nb_recrues)) %>%
  top_n(20, total_recrues) %>%
  pull(club_to)

# Filtrer les donn√©es
recrutements_top <- recrutements_par_poste %>%
  filter(club_to %in% top_clubs)

# Visualisation 
ggplot(recrutements_top, aes(x = position, y = fct_reorder(club_to, nb_recrues), fill = nb_recrues)) +
  geom_tile(color = "white") +
  scale_fill_gradient(low = "lightblue", high = "darkblue") +
  labs(
    title = "Top 20 clubs ‚Äì nombre de recrues par poste (√©t√© 2022)",
    x = "Poste",
    y = "Club",
    fill = "Nombre de recrues"
  ) +
  theme_minimal(base_size = 12) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

#### üß† Interpr√©tation du graphique:

- üîµ **US Salernitana 1919**, un club ayant lutt√© pour le maintien en Serie A, est celui qui a le plus recrut√© tous postes confondus, avec un **focus important sur les milieux offensifs** et **d√©fenseurs centraux**. Cela **confirme notre hypoth√®se**.

- üîµ D‚Äôautres clubs comme **US Lecce**, **US Cremonese** et **Udinese Calcio**, √©galement engag√©s dans la lutte pour le maintien, pr√©sentent aussi une strat√©gie de **renforcement d√©fensif**, particuli√®rement au poste de **centre-back**.

- üîµ En revanche, certains clubs comme **Olympique de Marseille** ou **Nottingham Forest**, pourtant positionn√©s plus haut (ou avec de grandes ambitions), ont **diversifi√© leurs recrutements** sur plusieurs lignes, ce qui nuance l‚Äôhypoth√®se. Cela peut refl√©ter une strat√©gie de **reconstruction d‚Äôeffectif** ou de pr√©paration √† des comp√©titions europ√©ennes.

- üîµ On observe une **forte demande en milieux de terrain**, avec une concentration sur les postes de *milieu central*, *d√©fensif* et *offensif*, ce qui correspond bien √† l‚Äôid√©e que la ma√Ætrise du milieu de terrain reste cruciale dans le football moderne.

- Peu de clubs ont recrut√© plusieurs **gardiens**, ce qui est conforme aux pratiques usuelles : un club ne recrute g√©n√©ralement qu‚Äôun seul gardien par saison.

- Enfin, certains clubs comme **FC Empoli** ou **OGC Nice** ont adopt√© une strat√©gie plus √©quilibr√©e, en recrutant sur plusieurs lignes, ce qui peut traduire un **renouvellement global** plut√¥t qu‚Äôun ajustement sp√©cifique.

‚úÖ **Conclusion** : l‚Äôhypoth√®se est **globalement confirm√©e** ‚Äì les clubs les moins bien class√©s ont recrut√© plus, notamment en d√©fense. Toutefois, des exceptions existent, li√©es √† des objectifs plus strat√©giques ou sp√©cifiques (comme l‚ÄôEurope ou le changement d‚Äôentra√Æneur).


---

### **Question 2: Quels postes sont les plus valoris√©s sur le march√© ?**


#### üéØ Objectif:
Visualiser la valeur marchande des joueurs par poste pour comprendre quels types de profils sont les plus pris√©s financi√®rement sur le march√©. Cela permet de hi√©rarchiser les postes selon leur importance √©conomique dans le football professionnel, sur la base du mercato d‚Äô√©t√© 2022.

#### üß™ Hypoth√®se :
Nous pensons que les **attaquants** seront les plus valoris√©s sur le march√©, en raison de leur impact direct sur les r√©sultats et leur potentiel marketing. Les **d√©fenseurs centraux** et **milieux offensifs** devraient aussi avoir une valeur √©lev√©e. √Ä l'inverse, les **gardiens** devraient √™tre en bas de l‚Äô√©chelle.


```{r message=FALSE}

transfers_clean <- transfers_2022 %>%
  filter(!is.na(position), !is.na(market_value)) %>%
  distinct(name, position, age, .keep_all = TRUE) %>%
  mutate(
    market_value = gsub("[^0-9\\.]", "", market_value),  # pour Retirer tout sauf chiffres et point
    market_value_num = as.numeric(market_value)
  ) %>%
  filter(market_value_num >= 1.5)

# On cr√©e une colonne pour regrouper certains postes qui sont tr√®s proches
transfers_clean <- transfers_clean %>%
  mutate(position_fr = position) %>%
  mutate(position_fr = recode(position_fr,
                              "Second Striker" = "Attaquant",
                              "Centre-Forward" = "Attaquant",
                              "Forward Attacker" = "Attaquant",
                              "attack" = "Attaquant",
                              "Right Midfield" = "Ailier droit",
                              "Left Midfield" = "Ailier gauche",
                              "Attacking Midfield" = "Milieu offensif",
                              "Central Midfield" = "Milieu central",
                              "Defensive Midfield" = "Milieu central", 
                              "Centre-Back" = "D√©fenseur central",
                              "defence" = "D√©fenseur central",
                              "Right Winger" = "Ailier droit",
                              "Left Winger" = "Ailier gauche", 
                              "Left-Back" = "D√©fenseur gauche",
                              "Right-Back" = "D√©fenseur droit",
                              "Goalkeeper" = "Gardien de but",
                              .default = position_fr))  # Par d√©faut, on garde la position d'origine

# Calcul de la moyenne et de l'√©cart-type des valeurs marchandes par poste
transfers_clean_stats <- transfers_clean %>%
  group_by(position_fr) %>%
  filter(n() >= 5) %>%  
  summarise(
    mean_value = mean(market_value_num, na.rm = TRUE),
    sd_value = sd(market_value_num, na.rm = TRUE)
  )

# Visualisation avec un barplot et des barres d'erreur pour voir les postes qui ont une grosse diff√©rence de prix
ggplot(transfers_clean_stats, aes(x = reorder(position_fr, mean_value), y = mean_value)) +
  geom_bar(stat = "identity", fill = "#4CAF50") +  
  geom_errorbar(aes(ymin = pmax(mean_value - sd_value, 0), ymax = mean_value + sd_value), width = 0.2) +
  labs(
    title = "Valeur marchande moyenne par poste (mercato √©t√© 2022)",
    x = "Poste",
    y = "Valeur marchande moyenne (Millions d'‚Ç¨)"
  ) +
  theme_minimal(base_size = 12) +
  coord_flip()

```


#### üß† Interpr√©tation du graphique:

- üîµ Les **attaquants** sont effectivement les plus valoris√©s, avec une moyenne largement sup√©rieure aux autres postes. Cela confirme leur statut strat√©gique et commercial dans le football moderne.

- üîµ Les **d√©fenseurs centraux** arrivent en seconde position, ce qui valide notre hypoth√®se selon laquelle leur solidit√© et leur raret√© renforcent leur valeur.

- üîµ Les **ailiers droits** et **gauches** ont aussi une valeur notable, notamment en raison de profils rares et techniques (ex. : gauchers jouant √† droite).

- üîµ Les **milieux offensifs** sont un peu moins valoris√©s que pr√©vu, ce qui peut s‚Äôexpliquer par l‚Äô√©volution des sch√©mas tactiques o√π leur r√¥le est parfois absorb√© par des ailiers ou des faux neufs.

- üîµ Les **gardiens** sont clairement en bas du classement, confirmant qu‚Äôils sont beaucoup moins valoris√©s sur le march√© des transferts.

‚úÖ **Conclusion** : L‚Äôhypoth√®se est **largement confirm√©e**. Les attaquants et d√©fenseurs centraux dominent le march√©, tandis que les gardiens sont nettement moins cot√©s.

---


### **Question 3 : Corr√©lation entre xG (expected goals) et points ?**

#### üéØ Objectif:
Analyser si le nombre d‚Äôexpected goals (xG) r√©alis√©s par une √©quipe est corr√©l√© avec son total de points en championnat. Cela permet de v√©rifier si produire beaucoup d‚Äôoccasions de qualit√© est un bon indicateur de performance globale. Donn√©es utilis√©es : saison 2022-2023.

#### üß™ Hypoth√®se :
Nous pensons qu‚Äôil existe une **corr√©lation positive significative** entre les xG et le total de points. Une √©quipe qui se cr√©e beaucoup d‚Äôoccasions de qualit√© a plus de chances de gagner des matchs, m√™me si la finition varie.


```{r message=FALSE}
team_stats_22_23 <- team_stats_2022_2023 %>%
  select(Squad, xG, Pts) %>%
  filter(!is.na(xG), !is.na(Pts))

ggplot(team_stats_22_23, aes(x = xG, y = Pts)) +
  geom_point(color = "#1f77b4", size = 3) +
  geom_smooth(method = "lm", color = "red", linetype = "dashed", se = TRUE) +  # se = TRUE pour afficher l'intervalle
  labs(
    title = "Corr√©lation entre Expected Goals (xG) et Points en championnat (2022-23)",
    x = "Expected Goals (xG)",
    y = "Points"
  ) +
  theme_minimal(base_size = 12)


```


#### üß† Interpr√©tation du graphique:

- üîµ Le nuage de points pr√©sente une **tendance lin√©aire positive** entre les xG et les points, confirm√©e par la droite de r√©gression.

- üîµ Cela sugg√®re que les √©quipes qui se cr√©ent beaucoup d‚Äôoccasions obtiennent en g√©n√©ral plus de points, ce qui **valide notre hypoth√®se**.

- üîµ Certaines √©quipes d√©vient de la tendance (sous-performance ou efficacit√© maximale), ce qui montre que les xG ne suffisent pas √† eux seuls √† expliquer les r√©sultats.

‚úÖ **Conclusion** : L‚Äôhypoth√®se est **confirm√©e**. Il existe une forte corr√©lation entre production offensive (xG) et performance en championnat.

---

### **Question 4 : Quel est l'impact des transferts sur la performance des clubs entre 2021-2022 et 2022-2023 ?**

#### üéØ Objectif:
Analyser l'√©volution de la performance des clubs entre deux saisons (2021-2022 ‚ûî 2022-2023) en fonction de leur nombre de recrues durant l'√©t√© 2022. L‚Äôobjectif est de voir s‚Äôil existe une corr√©lation entre le volume de recrutement et l‚Äô√©volution du classement.

#### üß™ Hypoth√®se :
Nous pensons que les clubs ayant recrut√© **mod√©r√©ment (4 √† 6 joueurs)** progresseront davantage, car ils auront cibl√© leurs besoins. Ceux qui ont **recrut√© massivement** risquent d‚Äôavoir des r√©sultats plus h√©t√©rog√®nes √† cause du manque de coh√©sion. Les clubs **n‚Äôayant pas recrut√©** pourraient stagner ou r√©gresser.



```{r message=FALSE}
# Regrouper les clubs qui ont recrut√© et compter
nb_recrues_club <- transfers_clean %>%
  group_by(club_to) %>%
  summarise(nb_recrues = n(), .groups = "drop")

# Pr√©parer les classements par saison
classements_2021_2022 <- team_stats_2021_2022 %>%
  select(Squad, LgRk) %>%
  rename(club = Squad, classement_2022 = LgRk)

classements_2022_2023 <- team_stats_2022_2023 %>%
  select(Squad, LgRk) %>%
  rename(club = Squad, classement_2023 = LgRk)

# Fusionner tout ensemble
evolution_clubs <- classements_2021_2022 %>%
  inner_join(classements_2022_2023, by = "club") %>%
  left_join(nb_recrues_club, by = c("club" = "club_to")) %>%
  mutate(
    nb_recrues = replace_na(nb_recrues, 0),  # certains clubs peuvent avoir 0 recrutement
    evolution_classement = classement_2022 - classement_2023
  )

# Pour la visualisation, cr√©er des classes selon nombre de recrues
evolution_clubs <- evolution_clubs %>%
  mutate(
    categorie_recrutement = case_when(
      nb_recrues == 0 ~ "0 recrue",
      nb_recrues <= 3 ~ "1-3 recrues",
      nb_recrues <= 6 ~ "4-6 recrues",
      TRUE ~ "7+ recrues"
    )
  )

# Visualisation : boxplot pour voir la distribution de l'√©volution du classement par cat√©gorie de recrutement
ggplot(evolution_clubs, aes(x = categorie_recrutement, y = evolution_classement, fill = categorie_recrutement)) +
  geom_boxplot(alpha = 0.7) +
  scale_fill_manual(values = c("lightblue", "skyblue", "blue", "darkblue")) +
  geom_hline(yintercept = 0, linetype = "dashed", color = "red") +
  labs(
    title = "Impact du recrutement sur l'√©volution du classement (2021-2023)",
    subtitle = "Distribution de l'√©volution de position en fonction du nombre de recrues estivales",
    x = "Nombre de recrues (cat√©gories)",
    y = "Evolution du classement (positif = am√©lioration)",
    fill = "Recrutements"
  ) +
  theme_minimal(base_size = 12)


```


#### üß† Interpr√©tation du graphique:

- üîµ Les clubs **sans recrues** pr√©sentent des r√©sultats tr√®s variables, avec une m√©diane proche de z√©ro, ce qui confirme qu‚Äôun manque de renfort ne permet pas de progresser de mani√®re fiable.

- üîµ Les clubs ayant recrut√© **1 √† 3 joueurs** semblent l√©g√®rement d√©cliner, peut-√™tre faute de renforts suffisants.

- üîµ Les clubs ayant recrut√© **4 √† 6 joueurs** montrent en moyenne une **am√©lioration du classement**, ce qui **confirme notre hypoth√®se principale**.

- üîµ En revanche, les clubs avec **7 recrues ou plus** ont une m√©diane l√©g√®rement n√©gative et une tr√®s grande dispersion, ce qui va dans le sens d‚Äôun **manque de stabilit√©** ou d‚Äôun effet ‚Äútrop de changements tue la coh√©rence‚Äù.

‚úÖ **Conclusion** : L‚Äôhypoth√®se est **largement confirm√©e** : un recrutement cibl√© et mesur√© semble plus b√©n√©fique qu‚Äôun mercato massif ou une inaction.

---


### **Question 5 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** : 


---

### **Question 6 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 7 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 8 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 9 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 10 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 11 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 12 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}


```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 13 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 14 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 15 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 16 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 17 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 18 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 19 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 20 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  



