---
title: "Rapport IF36"
author: "Ahamad MOHAMMAD, Minko Bikono NEIL-JOVY, Simon GELBART, Willen AMICHE"
date: "`r Sys.Date()`"
output:
  prettydoc::html_pretty:
    theme: cayman       
    highlight: github   
    toc: true
    toc_depth: 3
encoding: UTF-8
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = FALSE,     
  warning = FALSE,  
  message = FALSE   
)
```



## **Introduction**
L‚Äôobjectif de ce projet est d‚Äôexplorer l‚Äôimpact des strat√©gies de recrutement sur les performances sportives des clubs de football et de leurs joueurs. En croisant des statistiques individuelles (performances des joueurs), des donn√©es collectives (r√©sultats d‚Äô√©quipes) et les transferts r√©alis√©s lors du mercato estival 2022, nous cherchons √† identifier les leviers de performance et √† mieux comprendre les choix strat√©giques op√©r√©s par les clubs.
Notre analyse se base sur deux saisons compl√®tes (2021-2022 et 2022-2023), afin de mesurer l‚Äô√©volution des r√©sultats d‚Äôune ann√©e sur l‚Äôautre et de relier cette √©volution aux dynamiques de recrutement. √Ä travers plusieurs angles d‚Äôanalyse (volume de transferts, postes cibl√©s, valeur marchande, origine des joueurs, rendement, etc.), nous chercherons √† r√©pondre √† une s√©rie de questions permettant de quantifier et qualifier l'effet des recrutements sur la r√©ussite des √©quipes.

 


### **üìä Description des variables**

#### - üßç‚Äç‚ôÇÔ∏è Player Stats 2021-2022 (`2021-2022 Football Player Stats.csv`)

143 variables ‚Äì chaque ligne correspond √† un joueur pour la saison 2021-2022.

| Variable          | Type      | Description approximative |
|-------------------|-----------|----------------------------|
| `Rk`              | int64     | Rang ou ID du joueur       |
| `Player`          | object    | Nom du joueur              |
| `Nation`          | object    | Nationalit√©                |
| `Pos`             | object    | Poste                      |
| `Squad`           | object    | Club                       |
| `Comp`            | object    | Comp√©tition principale     |
| `Age`             | object    | √Çge                        |
| `Born`            | object    | Ann√©e de naissance         |
| ...               | ...       | ...et plus de 130 autres statistiques de jeu : buts, passes, tirs, dribbles, fautes, tacles, interceptions, passes progressives, etc. |
| `AerWon`          | float64   | Duels a√©riens gagn√©s       |
| `AerLost`         | float64   | Duels a√©riens perdus       |
| `AerWon%`         | float64   | Pourcentage de duels a√©riens gagn√©s |

---

#### - üèüÔ∏è Team Stats 2021-2022 (`2021-2022 Football Team Stats.csv`)

20 variables ‚Äì chaque ligne correspond √† une √©quipe.

| Variable          | Type      | Description |
|------------------|-----------|-------------|
| `Rk`             | int64     | Rang        |
| `Squad`          | object    | Nom du club |
| `Country`        | object    | Pays        |
| `LgRk`           | int64     | Classement dans la ligue |
| `MP`, `W`, `D`, `L` | int64  | Matchs jou√©s, Victoires, Nuls, D√©faites |
| `GF`, `GA`, `GD` | int64     | Buts pour, contre, diff√©rence |
| `Pts`, `Pts/G`   | int64 / float64 | Points et moyenne par match |
| `xG`, `xGA`, `xGD`, `xGD/90` | float64 | Donn√©es d‚Äôexpected goals |
| `Attendance`     | int64     | Affluence moyenne |
| `Top Team Scorer`| object    | Meilleur buteur |
| `Goalkeeper`     | object    | Gardien principal |

---

#### - üèüÔ∏è Team Stats 2022-2023 (`2022-2023 Football Team Stats.csv`)

M√™me structure et signification que pour 2021-2022, mais avec la saison suivante.

---

#### - üîÑ Transfers √ât√© 2022 (`2022_2023_football_summer_transfers.csv`)

11 variables ‚Äì chaque ligne correspond √† un transfert.

| Variable        | Type    | Description |
|----------------|---------|-------------|
| `name`         | object  | Nom du joueur transf√©r√© |
| `position`     | object  | Poste            |
| `age`          | object  | √Çge              |
| `market_value` | object  | Valeur estim√©e   |
| `country_from` | object  | Pays de d√©part   |
| `league_from`  | object  | Ligue de d√©part  |
| `club_from`    | object  | Club de d√©part   |
| `country_to`   | object  | Pays d‚Äôarriv√©e   |
| `league_to`    | object  | Ligue d‚Äôarriv√©e  |
| `club_to`      | object  | Club d‚Äôarriv√©e   |
| `fee`          | object  | Montant du transfert (peut contenir "Free", "Loan", etc.) |

---

## **Analyse et r√©ponses aux questions**


```{r chargement-librairies, message=FALSE}
# Chargement des packages n√©cessaires

library(tidyverse)
library(ggplot2)
library(scales)
library(dplyr)
library(stringr)
library(ggalluvial)

```


```{r importation-donnees, message=FALSE, warning=FALSE}
# Importation des donn√©es

player_stats_2021_2022 <- read.csv("data/2021-2022 Football Player Stats.csv", sep = ";", fileEncoding = "ISO-8859-1")
team_stats_2021_2022 <- read.csv("data/2021-2022 Football Team Stats.csv", sep = ";", fileEncoding = "ISO-8859-1")
team_stats_2022_2023 <- read.csv("data/2022-2023 Football Team Stats.csv", sep = ";", fileEncoding = "ISO-8859-1")
transfers_2022 <- read.csv("data/2022_2023_football_summer_transfers.csv", sep = ",", fileEncoding = "ISO-8859-1")
```


```{r}
# Traduction des postes 
transfers_2022 <- transfers_2022 %>%
  mutate(position = str_trim(position)) %>%
  mutate(position = recode(position,
    "Centre-Forward" = "Attaquant",
    "Second Striker" = "Attaquant",
    "Forward Attacker" = "Attaquant",
    "attack" = "Attaquant",

    "Right Winger" = "Ailier droit",
    "Right Midfield" = "Ailier droit",

    "Left Winger" = "Ailier gauche",
    "Left Midfield" = "Ailier gauche",

    "Attacking Midfield" = "Milieu offensif",
    "Defensive Midfield" = "Milieu d√©fensif",
    "Central Midfield" = "Milieu central",

    "Centre-Back" = "D√©fenseur central",
    "defence" = "D√©fenseur central",
    "Left-Back" = "D√©fenseur gauche",
    "Right-Back" = "D√©fenseur droit",

    "Goalkeeper" = "Gardien de but",

    .default = "Autre"
  ))

```

---

### **Question 1 : Quels clubs ont le plus recrut√© par poste (top 20) ?**

#### üéØ Objectif:
Identifier les **20 clubs les plus actifs** lors du mercato d‚Äô√©t√© 2022 en termes de nombre de recrues, puis visualiser quels postes ont √©t√© cibl√©s en priorit√© par ces clubs. Cela permet de mieux comprendre les **strat√©gies de renforcement** des effectifs selon les lignes de jeu (d√©fense, milieu, attaque).

#### üß™ Hypoth√®se :
Nous supposons que les clubs ayant termin√© en bas de classement ou nouvellement promus ont davantage recrut√©, notamment en d√©fense et au milieu, dans une logique de **renforcement pour assurer le maintien**. √Ä l‚Äôinverse, les clubs plus stables ou ambitieux auraient fait un recrutement plus cibl√© et r√©parti entre les lignes.



```{r message=FALSE}
# Code

# Nettoyage de base
transfers_clean <- transfers_2022 %>%
  filter(!is.na(club_to), !is.na(position), position != "")

# Regrouper et compter
recrutements_par_poste <- transfers_clean %>%
  group_by(club_to, position) %>%
  summarise(nb_recrues = n(), .groups = "drop")

# Garder uniquement les 20 clubs ayant recrut√© le plus globalement
top_clubs <- recrutements_par_poste %>%
  group_by(club_to) %>%
  summarise(total_recrues = sum(nb_recrues)) %>%
  top_n(20, total_recrues) %>%
  pull(club_to)

# Filtrer les donn√©es
recrutements_top <- recrutements_par_poste %>%
  filter(club_to %in% top_clubs)

# Visualisation 
ggplot(recrutements_top, aes(x = position, y = fct_reorder(club_to, nb_recrues), fill = nb_recrues)) +
  geom_tile(color = "white") +
  scale_fill_gradient(low = "lightblue", high = "darkblue") +
  labs(
    title = "Top 20 clubs ‚Äì nombre de recrues par poste (√©t√© 2022)",
    x = "Poste",
    y = "Club",
    fill = "Nombre de recrues"
  ) +
  theme_minimal(base_size = 12) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

#### üß† Interpr√©tation du graphique:

- üîµ **US Salernitana 1919**, un club ayant lutt√© pour le maintien en Serie A, est celui qui a le plus recrut√© tous postes confondus, avec un **focus important sur les milieux offensifs** et **d√©fenseurs centraux**. Cela **confirme notre hypoth√®se**.

- üîµ D‚Äôautres clubs comme **US Lecce**, **US Cremonese** et **Udinese Calcio**, √©galement engag√©s dans la lutte pour le maintien, pr√©sentent aussi une strat√©gie de **renforcement d√©fensif**, particuli√®rement au poste de **centre-back**.

- üîµ En revanche, certains clubs comme **Olympique de Marseille** ou **Nottingham Forest**, pourtant positionn√©s plus haut (ou avec de grandes ambitions), ont **diversifi√© leurs recrutements** sur plusieurs lignes, ce qui nuance l‚Äôhypoth√®se. Cela peut refl√©ter une strat√©gie de **reconstruction d‚Äôeffectif** ou de pr√©paration √† des comp√©titions europ√©ennes.

- üîµ On observe une **forte demande en milieux de terrain**, avec une concentration sur les postes de *milieu central*, *d√©fensif* et *offensif*, ce qui correspond bien √† l‚Äôid√©e que la ma√Ætrise du milieu de terrain reste cruciale dans le football moderne.

- Peu de clubs ont recrut√© plusieurs **gardiens**, ce qui est conforme aux pratiques usuelles : un club ne recrute g√©n√©ralement qu‚Äôun seul gardien par saison.

- Enfin, certains clubs comme **FC Empoli** ou **OGC Nice** ont adopt√© une strat√©gie plus √©quilibr√©e, en recrutant sur plusieurs lignes, ce qui peut traduire un **renouvellement global** plut√¥t qu‚Äôun ajustement sp√©cifique.

‚úÖ **Conclusion** : l‚Äôhypoth√®se est **globalement confirm√©e** ‚Äì les clubs les moins bien class√©s ont recrut√© plus, notamment en d√©fense. Toutefois, des exceptions existent, li√©es √† des objectifs plus strat√©giques ou sp√©cifiques (comme l‚ÄôEurope ou le changement d‚Äôentra√Æneur).


---

### **Question 2: Quels postes sont les plus valoris√©s sur le march√© ?**


#### üéØ Objectif:
Visualiser la valeur marchande des joueurs par poste pour comprendre quels types de profils sont les plus pris√©s financi√®rement sur le march√©. Cela permet de hi√©rarchiser les postes selon leur importance √©conomique dans le football professionnel, sur la base du mercato d‚Äô√©t√© 2022.

#### üß™ Hypoth√®se :
Nous pensons que les **attaquants** seront les plus valoris√©s sur le march√©, en raison de leur impact direct sur les r√©sultats et leur potentiel marketing. Les **d√©fenseurs centraux** et **milieux offensifs** devraient aussi avoir une valeur √©lev√©e. √Ä l'inverse, les **gardiens** devraient √™tre en bas de l‚Äô√©chelle.


```{r message=FALSE}

# Nettoyage et pr√©paration des donn√©es de transfert
transfers_clean <- transfers_2022 %>%
  filter(!is.na(position), !is.na(market_value)) %>%
  distinct(name, position, age, .keep_all = TRUE) %>%
  mutate(
    market_value = gsub("[^0-9\\.]", "", market_value), 
    market_value_num = as.numeric(market_value)
  ) %>%
  filter(market_value_num >= 1.5)

# Calcul de la moyenne et de l'√©cart-type des valeurs marchandes par poste
transfers_clean_stats <- transfers_clean %>%
  group_by(position) %>%
  filter(n() >= 5) %>%
  summarise(
    mean_value = mean(market_value_num, na.rm = TRUE),
    sd_value = sd(market_value_num, na.rm = TRUE)
  )

# Visualisation avec titres en fran√ßais
ggplot(transfers_clean_stats, aes(x = reorder(position, mean_value), y = mean_value)) +
  geom_bar(stat = "identity", fill = "#4CAF50") +  
  geom_errorbar(aes(ymin = pmax(mean_value - sd_value, 0), ymax = mean_value + sd_value), width = 0.2) +
  labs(
    title = "Valeur marchande moyenne par poste (mercato √©t√© 2022)",
    x = "Poste (en anglais)",
    y = "Valeur marchande moyenne (en millions d'euros)"
  ) +
  theme_minimal(base_size = 12) +
  coord_flip()


```


#### üß† Interpr√©tation du graphique :

Ce graphique combine deux informations importantes :

- les barres vertes indiquent la valeur marchande moyenne des joueurs par poste ;

- les barres noires (barres d‚Äôerreur) repr√©sentent l‚Äô√©cart-type, c‚Äôest-√†-dire la variabilit√© des valeurs selon les profils.

- üîµ Les attaquants sont effectivement les plus valoris√©s, avec une moyenne nettement sup√©rieure. Cela confirme leur r√¥le strat√©gique et commercial. Leur forte variabilit√© montre que certains sont recrut√©s √† prix tr√®s √©lev√©, tirant la moyenne vers le haut.

- üîµ Les d√©fenseurs centraux arrivent en seconde position, avec une valeur moyenne √©lev√©e et une dispersion plus contenue, signe d‚Äôune reconnaissance stable de leur importance.

- üîµ Les ailiers droits et gauches pr√©sentent aussi des valeurs √©lev√©es, ce qui refl√®te la raret√© de certains profils tr√®s recherch√©s (notamment les ailiers gauchers jouant √† droite).

- üîµ Les milieux offensifs sont un peu moins valoris√©s que pr√©vu, et affichent une grande h√©t√©rog√©n√©it√© : cela sugg√®re une disparit√© importante entre quelques stars tr√®s co√ªteuses et d‚Äôautres profils plus modestes.

- üîµ Les gardiens sont les moins valoris√©s, avec une moyenne basse et une variabilit√© plus r√©duite, ce qui traduit leur statut secondaire sur le march√©.

‚úÖ Conclusion : L‚Äôhypoth√®se est largement confirm√©e. Les attaquants et d√©fenseurs centraux dominent en valeur. L‚Äôajout des barres d‚Äôerreur r√©v√®le aussi des disparit√©s fortes sur certains postes, notamment offensifs, ce qui enrichit l‚Äôanalyse au-del√† des moyennes seules.


---


### **Question 3 : Corr√©lation entre xG (expected goals) et points ?**

#### üéØ Objectif:
Analyser si le nombre d‚Äôexpected goals (xG) r√©alis√©s par une √©quipe est corr√©l√© avec son total de points en championnat. Cela permet de v√©rifier si produire beaucoup d‚Äôoccasions de qualit√© est un bon indicateur de performance globale. Les expected goals (xG) mesurent la probabilit√© qu‚Äôun tir se transforme en but, en fonction de facteurs comme la position du tir, le type d‚Äôaction, l‚Äôangle de tir ou la pression d√©fensive. En somme, plus une √©quipe cumule d‚ÄôxG, plus elle est cens√©e marquer. Donn√©es utilis√©es : saison 2022-2023.

#### üß™ Hypoth√®se :
Nous pensons qu‚Äôil existe une **corr√©lation positive significative** entre les xG et le total de points. Une √©quipe qui se cr√©e beaucoup d‚Äôoccasions de qualit√© a plus de chances de gagner des matchs, m√™me si la finition varie.


```{r message=FALSE}
team_stats_22_23 <- team_stats_2022_2023 %>%
  select(Squad, xG, Pts) %>%
  filter(!is.na(xG), !is.na(Pts))

ggplot(team_stats_22_23, aes(x = xG, y = Pts)) +
  geom_point(color = "#1f77b4", size = 3) +
  geom_smooth(method = "lm", color = "red", linetype = "dashed", se = TRUE) +  # se = TRUE pour afficher l'intervalle
  labs(
    title = "Corr√©lation entre Expected Goals (xG) et Points en championnat(2022-23)",
    x = "Expected Goals (xG)",
    y = "Points"
  ) +
  theme_minimal(base_size = 12)


```


#### üß† Interpr√©tation du graphique:

- üîµ Le nuage de points pr√©sente une **tendance lin√©aire positive** entre les xG et les points, confirm√©e par la droite de r√©gression.

- üîµ Cela sugg√®re que les √©quipes qui se cr√©ent beaucoup d‚Äôoccasions obtiennent en g√©n√©ral plus de points, ce qui **valide notre hypoth√®se**.

- üîµ Certaines √©quipes d√©vient de la tendance (sous-performance ou efficacit√© maximale), ce qui montre que les xG ne suffisent pas √† eux seuls √† expliquer les r√©sultats.

‚úÖ **Conclusion** : L‚Äôhypoth√®se est **confirm√©e**. Il existe une forte corr√©lation entre production offensive (xG) et performance en championnat.

---

### **Question 4 : Quel est l'impact des transferts sur la performance des clubs entre 2021-2022 et 2022-2023 ?**

#### üéØ Objectif:
Analyser l'√©volution de la performance des clubs entre deux saisons (2021-2022 ‚ûî 2022-2023) en fonction de leur nombre de recrues durant l'√©t√© 2022. L‚Äôobjectif est de voir s‚Äôil existe une corr√©lation entre le volume de recrutement et l‚Äô√©volution du classement.

#### üß™ Hypoth√®se :
Nous pensons que les clubs ayant recrut√© **mod√©r√©ment (4 √† 6 joueurs)** progresseront davantage, car ils auront cibl√© leurs besoins. Ceux qui ont **recrut√© massivement** risquent d‚Äôavoir des r√©sultats plus h√©t√©rog√®nes √† cause du manque de coh√©sion. Les clubs **n‚Äôayant pas recrut√©** pourraient stagner ou r√©gresser.



```{r message=FALSE}

# Regrouper les clubs qui ont recrut√© et compter
nb_recrues_club <- transfers_clean %>%
  group_by(club_to) %>%
  summarise(nb_recrues = n(), .groups = "drop")

# Pr√©parer les classements par saison
classements_2021_2022 <- team_stats_2021_2022 %>%
  select(Squad, LgRk) %>%
  rename(club = Squad, classement_2022 = LgRk)

classements_2022_2023 <- team_stats_2022_2023 %>%
  select(Squad, LgRk) %>%
  rename(club = Squad, classement_2023 = LgRk)

# Fusionner tout ensemble
evolution_clubs <- classements_2021_2022 %>%
  inner_join(classements_2022_2023, by = "club") %>%
  left_join(nb_recrues_club, by = c("club" = "club_to")) %>%
  mutate(
    nb_recrues = replace_na(nb_recrues, 0),  # certains clubs peuvent avoir 0 recrutement
    evolution_classement = classement_2022 - classement_2023
  ) %>%
  mutate(
    categorie_recrutement = case_when(
      nb_recrues == 0 ~ "0 recrue",
      nb_recrues <= 3 ~ "1-3 recrues",
      nb_recrues <= 6 ~ "4-6 recrues",
      TRUE ~ "7+ recrues"
    )
  )

# Visualisation : boxplot avec palette corrig√©e
ggplot(evolution_clubs, aes(x = categorie_recrutement, y = evolution_classement, fill = categorie_recrutement)) +
  geom_boxplot(alpha = 0.8) +
  scale_fill_manual(
    values = c(
      "0 recrue" = "#f8766d",        
      "1-3 recrues" = "#f1c40f",     
      "4-6 recrues" = "#2ecc71",    
      "7+ recrues" = "#3498db"      
    )
  ) +
  geom_hline(yintercept = 0, linetype = "dashed", color = "black") +
  labs(
    title = "Impact du recrutement sur l'√©volution du classement (2021-2023)",
    subtitle = "Distribution de l'√©volution de position en fonction du nombre de recrues estivales",
    x = "Nombre de recrues (cat√©gories)",
    y = "√âvolution du classement (positif = am√©lioration)",
    fill = "Recrutements"
  ) +
  theme_minimal(base_size = 12) +
  theme(legend.position = "right")


```


#### üß† Interpr√©tation du graphique:

- üîµ Les clubs n‚Äôayant recrut√© aucun joueur pr√©sentent des r√©sultats tr√®s variables, avec une m√©diane proche de z√©ro. Cela sugg√®re qu‚Äôen l‚Äôabsence de renfort, il est difficile de progresser de mani√®re structur√©e, et que la stabilit√© seule ne suffit pas toujours.

- üîµ Les clubs ayant recrut√© entre 1 et 3 joueurs semblent en l√©g√®re r√©gression. Ce type de recrutement limit√© peut refl√©ter un ajustement insuffisant face aux besoins de l‚Äôeffectif.

- üîµ En revanche, les clubs ayant recrut√© entre 4 et 6 joueurs enregistrent en moyenne une am√©lioration de leur classement. Cela semble indiquer qu‚Äôun renforcement cibl√©, sans bouleverser l‚Äô√©quilibre collectif, est plus efficace.

- üîµ √Ä l‚Äôoppos√©, les clubs ayant recrut√© 7 joueurs ou plus affichent une m√©diane n√©gative et une forte dispersion des r√©sultats. Cela peut s‚Äôexpliquer par une perte de rep√®res au sein du groupe : remplacer trop de joueurs √† la fois nuit √† la coh√©sion et impose de reconstruire l‚Äôesprit d‚Äô√©quipe, ce qui peut ralentir les performances sportives.

‚úÖ **Conclusion** : L‚Äôhypoth√®se est **largement confirm√©e** : un recrutement cibl√© et mesur√© semble plus b√©n√©fique qu‚Äôun mercato massif ou une inaction.

---


### **Question 5 : Quels sont les transferts les plus co√ªteux de l‚Äô√©t√© 2022 ? **

#### üéØ Objectif: 
Identifier les joueurs ayant fait l‚Äôobjet des transferts les plus on√©reux durant le mercato estival 2022, afin de mieux comprendre o√π se concentrent les plus gros investissements du march√©.


#### üß™ Hypoth√®se :
Les attaquants et les jeunes espoirs prometteurs devraient constituer la majorit√© des transferts les plus chers, notamment en direction des grands clubs europ√©ens.



```{r}
# Nettoyage des montants
transferts_top <- transfers_2022 %>%
  filter(!is.na(fee)) %>%
  mutate(fee_num = str_extract(fee, "[0-9,.]+"),
         fee_num = as.numeric(gsub(",", ".", fee_num))) %>%
  filter(!is.na(fee_num)) %>%
  arrange(desc(fee_num)) %>%
  distinct(name, .keep_all = TRUE) %>%
  slice_max(fee_num, n = 15)

# Graphique
ggplot(transferts_top, aes(x = reorder(name, fee_num), y = fee_num)) +
  geom_col(fill = "#1f77b4") +
  coord_flip() +
  labs(
    title = "Top 15 des transferts les plus chers ‚Äì √ât√© 2022",
    x = "Joueur",
    y = "Montant du transfert (en millions ‚Ç¨)"
  ) +
  theme_minimal(base_size = 12)

```


#### üß† Interpr√©tation du graphique:

- üîµ Le graphique met en √©vidence les 15 plus grosses transactions du mercato d‚Äô√©t√© 2022.

- üîµ Une forte majorit√© des joueurs sont des profils offensifs : attaquants ou milieux cr√©atifs.

- üîµ On retrouve principalement des clubs disposant d‚Äôun fort pouvoir d‚Äôachat, issus de la Premier League ou des grands championnats europ√©ens.

- üîµ Les sommes engag√©es confirment l‚Äôimportance strat√©gique de certains postes et le pari sur le potentiel futur des jeunes joueurs.


‚úÖ **Conclusion** :  L‚Äôhypoth√®se est confirm√©e. Les plus grosses d√©penses concernent surtout des joueurs offensifs ou tr√®s jeunes, recrut√©s par des clubs ambitieux financi√®rement. Cela illustre la concentration des investissements sur des profils √† fort impact ou √† forte valeur de revente.

---

### **Question 6 : Quelle part des buts est marqu√©e par des recrues (top 10) **

#### üéØ Objectif:
Mesurer la contribution directe des joueurs recrut√©s √† l‚Äô√©t√© 2022 dans le total des buts marqu√©s par leur club en 2022-2023.

#### üß™ Hypoth√®se :
Les recrues, devraient repr√©senter une part importante des buts dans les clubs ayant beaucoup investi.



```{r}
# Nettoyage des donn√©es de transfert
transfers_cleaned <- transfers_2022 %>%
  filter(!is.na(club_to), !is.na(name)) %>%
  distinct(name, club_to)

# Nettoyage et regroupement des joueurs recrut√©s
recrues_stats <- player_stats_2021_2022 %>%
  rename(name = Player, club = Squad, buts = Goals, minutes = Min) %>%
  mutate(name = str_trim(name)) %>%
  inner_join(transfers_cleaned, by = "name") %>%
  filter(!is.na(buts)) %>%
  group_by(club_to) %>%
  summarise(buts_recrues = sum(as.numeric(buts), na.rm = TRUE), .groups = "drop")

# Buts totaux par club (2022-2023)
buts_totaux <- team_stats_2022_2023 %>%
  rename(club = Squad) %>%
  select(club, GF)

# Fusion des datasets
part_buts <- buts_totaux %>%
  left_join(recrues_stats, by = c("club" = "club_to")) %>%
  mutate(
    buts_recrues = replace_na(buts_recrues, 0),
    part_recrues = buts_recrues / GF
  ) %>%
  filter(GF > 0, part_recrues > 0) %>% # on garde uniquement les clubs actifs
  arrange(desc(part_recrues)) %>%
  slice_max(part_recrues, n = 10)

# Visualisation en barres horizontales
ggplot(part_buts, aes(x = reorder(club, part_recrues), y = part_recrues)) +
  geom_col(fill = "#0072B2") +
  coord_flip() +
  scale_y_continuous(labels = percent_format(accuracy = 1)) +
  labs(
    title = "Part des buts marqu√©s par des recrues (Top 10 clubs)",
    x = "Club",
    y = "Part des buts (%)"
  ) +
  theme_minimal(base_size = 12)
```


#### üß† Interpr√©tation du graphique:

- üîµ Le graphique met en valeur les 10 clubs o√π les recrues ont contribu√© de mani√®re significative au total des buts.

- üîµ Cela confirme l‚Äôimpact potentiel des nouveaux joueurs sur le rendement offensif d‚Äôune √©quipe, surtout en cas de bonne int√©gration.

‚úÖ **Conclusion** :  L‚Äôhypoth√®se est partiellement confirm√©e. Dans certains clubs, les recrues ont √©t√© d√©terminantes offensivement. Dans d‚Äôautres, leur impact a √©t√© plus indirect. La contribution d√©pend donc fortement du profil des joueurs recrut√©s et du besoin tactique identifi√©.



---

### **Question 7 : Quel est le rendement des recrues vs anciens **

#### üéØ Objectif:
Comparer l‚Äôefficacit√© offensive des recrues vs les joueurs d√©j√† pr√©sents.



#### üß™ Hypoth√®se :
Les joueurs d√©j√† int√©gr√©s au collectif devraient avoir un meilleur rendement offensif, car les recrues ont souvent besoin de temps pour s‚Äôadapter.


```{r}
# Liste des recrues (nom + club)
recrues <- transfers_2022 %>%
  filter(!is.na(name)) %>%
  distinct(name) %>%
  mutate(statut = "Recrue")

# Donn√©es joueurs avec efficacit√© offensive
rendement_joueurs <- player_stats_2021_2022 %>%
  rename(name = Player, buts = Goals, minutes = Min) %>%
  mutate(name = str_trim(name),
         buts = as.numeric(buts),
         minutes = as.numeric(minutes),
         rendement = buts / minutes) %>%
  filter(!is.na(rendement), minutes > 200) %>%
  mutate(statut = ifelse(name %in% recrues$name, "Recrue", "D√©j√† pr√©sent"))

# Visualisation : violin plot du rendement
ggplot(rendement_joueurs, aes(x = statut, y = rendement, fill = statut)) +
  geom_violin(trim = FALSE, alpha = 0.7) +
  geom_boxplot(width = 0.1, color = "black", outlier.shape = NA) +
  scale_y_continuous(labels = scales::percent_format(accuracy = 0.1)) +
  labs(
    title = "Rendement offensif : Recrues vs Joueurs d√©j√† pr√©sents",
    x = "",
    y = "Buts par minute jou√©e"
  ) +
  theme_minimal(base_size = 13) +
  theme(legend.position = "none")
```


#### üß† Interpr√©tation du graphique:

- üîµ La forme du violin plot montre la distribution compl√®te du rendement offensif.

- üîµ Les joueurs d√©j√† pr√©sents pr√©sentent une distribution plus homog√®ne et une m√©diane plus √©lev√©e.

- üîµ Les recrues ont un rendement plus variable : certains tr√®s efficaces, mais aussi de nombreux cas en dessous de la m√©diane des anciens.

‚úÖ **Conclusion** :  L‚Äôhypoth√®se est globalement confirm√©e. Les joueurs d√©j√† pr√©sents affichent un meilleur rendement moyen que les recrues, ce qui refl√®te sans doute une meilleure adaptation au syst√®me de jeu. Cependant, certaines recrues affichent des performances remarquables, ce qui montre leur potentiel une fois int√©gr√©es.

---

### **Question 8 : Recrutement local vs international? (top 15)**

#### üéØ Objectif:
Visualiser la r√©partition g√©ographique du top 15 des recrutements pour √©valuer dans quelle mesure les clubs recrutent localement ou √† l‚Äôinternational.

#### üß™ Hypoth√®se :
Les grands clubs europ√©ens recrutent principalement √† l‚Äôinternational, tandis que les clubs de second rang privil√©gient les transferts nationaux pour des raisons de co√ªt et de logistique.


```{r}
# Identifier les 15 pays qui ont recrut√© le plus
top_pays <- transfers_2022 %>%
  filter(!is.na(country_to)) %>%
  count(country_to, name = "nb_total") %>%
  top_n(15, nb_total) %>%
  pull(country_to)

# Pr√©parer les donn√©es filtr√©es
transfers_local_vs_intl <- transfers_2022 %>%
  filter(!is.na(country_from), !is.na(country_to)) %>%
  mutate(type = ifelse(country_from == country_to, "National", "International")) %>%
  count(country_to, type, name = "nb_transferts") %>%
  filter(country_to %in% top_pays)

# Barplot group√© 
ggplot(transfers_local_vs_intl, aes(x = reorder(country_to, -nb_transferts), y = nb_transferts, fill = type)) +
  geom_bar(stat = "identity") +
  labs(
    title = "Recrutements nationaux vs internationaux (Top 15 pays ‚Äì √©t√© 2022)",
    x = "Pays de destination",
    y = "Nombre de transferts",
    fill = "Type de transfert"
  ) +
  theme_minimal(base_size = 13) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```


#### üß† Interpr√©tation du graphique:

- üîµ Certains pays comme l‚ÄôAllemagne ou l‚ÄôEspagne ont un bon √©quilibre entre local et international.

- üîµ Les clubs des championnats secondaires recrutent davantage localement, contrairement aux clubs anglais ou italiens.


‚úÖ **Conclusion** :  L‚Äôhypoth√®se est confirm√©e. Le recrutement international est pr√©pond√©rant dans les grands championnats, mais des flux internes nationaux importants subsistent dans certains pays. La carte des transferts illustre une g√©opolitique du football bien ancr√©e.

---

### **Question 9 : Quels clubs misent sur des jeunes joueurs ?**

#### üéØ Objectif:

Identifier les clubs qui int√®grent le plus de jeunes joueurs dans leur effectif et leur donnent du temps de jeu.

#### üß™ Hypoth√®se :

Certains clubs, notamment ceux ayant une strat√©gie ax√©e sur la formation ou la revente de joueurs (comme RB Salzburg, l'Ajax ou Barcelone), misent davantage sur les jeunes talents, tant en nombre qu‚Äôen minutes jou√©es. On peut √©galement s‚Äôattendre √† observer une forte pr√©sence de jeunes joueurs dans les clubs des championnats fran√ßais et espagnol, ces pays disposant de viviers de talents particuli√®rement importants et n'h√©site pas √† former de jeunes joueurs. Par ailleurs, les clubs disposant de moyens financiers plus limit√©s ont souvent tendance √† faire davantage confiance aux jeunes joueurs, qui repr√©sentent une alternative plus √©conomique

```{r}

# Filtrer les jeunes joueurs 
jeunes_joueurs <- player_stats_2021_2022  %>%
  filter(Age < 22)

# Compter le nombre de jeunes joueurs par club
jeunes_par_club <- jeunes_joueurs %>%
  count(Squad, name = "nb_jeunes") %>%
  arrange(desc(nb_jeunes)) %>%
  top_n(10, nb_jeunes)

# Barplot horizontal
ggplot(jeunes_par_club, aes(x = reorder(Squad, nb_jeunes), y = nb_jeunes)) +
  geom_col(fill = "#66BB6A", width = 0.6) +  
  geom_text(aes(label = nb_jeunes), hjust = -0.1, size = 4, color = "black") +
  coord_flip(clip = "off") +
  labs(
    title = "Top 10 des clubs avec le plus de jeunes joueurs (< 22 ans)\nSaison 2021/22",
    x = NULL,
    y = "Nombre de jeunes joueurs"
  ) +
  theme_minimal(base_size = 13) +
  theme(
    plot.title = element_text(face = "bold", size = 14, hjust = 0.5),
    axis.text.y = element_text(face = "bold"),
    axis.text.x = element_text(color = "gray30"),
    panel.grid.major.y = element_blank(),  
    panel.grid.minor = element_blank(),
    plot.margin = margin(10, 20, 10, 10) 
  ) +
  ylim(0, max(jeunes_par_club$nb_jeunes) + 2)  

```
```{r}
# Filtrer les jeunes joueurs (<23 ans)
jeunes_joueurs <- player_stats_2021_2022 %>%
  filter(Age < 23)

# Calculer le total des minutes jou√©es par club (par les jeunes joueurs)
minutes_par_club <- jeunes_joueurs %>%
  group_by(Squad) %>%
  summarise(total_minutes = sum(Min, na.rm = TRUE)) %>%
  arrange(desc(total_minutes)) %>%
  slice_head(n = 10)  # Top 10 clubs

# Lollipop plot
ggplot(minutes_par_club, aes(x = reorder(Squad, total_minutes), y = total_minutes)) +
  geom_segment(aes(xend = Squad, y = 0, yend = total_minutes), color = "#4CAF50", size = 1.2) +
  geom_point(color = "#FBC02D", size = 6) +
  coord_flip() +
  labs(
    title = "Total des minutes jou√©es par les jeunes joueurs\npar club sur la saison 2021/22",
    x = "Club",
    y = "Minutes jou√©es"
  ) +
  theme_minimal(base_size = 13) +
  theme(
    plot.title = element_text(face = "bold", hjust = 0.5),
    axis.text.y = element_text(face = "bold"),
    panel.grid.major.y = element_blank(),
    panel.grid.minor = element_blank(),
    axis.ticks = element_blank()
  )


```

#### üß† Interpr√©tation des graphiques:

On observe que plusieurs clubs r√©put√©s pour leur politique de formation, comme le FC Barcelone, le Borussia Dortmund ou le Bayer Leverkusen, n‚Äôh√©sitent pas √† accorder un temps de jeu cons√©quent √† leurs jeunes joueurs. Cette tendance confirme l‚Äôimportance de la jeunesse dans leur strat√©gie sportive, que ce soit pour renforcer l‚Äô√©quipe premi√®re ou pour valoriser les talents issus de leur centre de formation.

Comme sugg√©r√© dans l'hypoth√®se initiale, le championnat fran√ßais se distingue particuli√®rement, avec six clubs pr√©sents dans le top 15 en nombre de jeunes joueurs utilis√©s, et quatre clubs dans le top 10 en termes de minutes jou√©es. Cela illustre une culture profond√©ment ancr√©e de la formation et une volont√© d‚Äôint√©grer rapidement les jeunes dans les effectifs professionnels. La Ligue 1 s‚Äôimpose ainsi comme l‚Äôun des championnats les plus propices √† l‚Äô√©mergence de jeunes talents.

En revanche, la Liga espagnole affiche une pr√©sence plus discr√®te que ce que l‚Äôon aurait pu anticiper, avec seulement deux clubs dans le top 15 en nombre de jeunes joueurs, et deux √©galement dans le top 10 en minutes jou√©es. Toutefois, le FC Barcelone, pr√©sent dans les deux classements, incarne une exception notable, illustrant une strat√©gie claire de valorisation de la formation interne. Des clubs comme Reims, Bologne ou Valence adoptent √©galement cette approche, en combinant un effectif jeune √† un temps de jeu significatif pour ces joueurs.

Enfin, aucune tendance nette ne permet de lier le budget des clubs √† l‚Äôutilisation des jeunes joueurs. Des formations aux ressources importantes comme le PSG, le Milan AC ou le FC Barcelone figurent parmi celles qui font le plus appel √† leurs jeunes, ce qui montre qu‚Äôun centre de formation performant peut constituer un atout strat√©gique, ind√©pendamment de la puissance financi√®re du club.


‚úÖ **Conclusion** :  
L‚Äôhypoth√®se est donc globalement confirm√©e : les clubs avec une strat√©gie de formation claire jouent davantage leurs jeunes talents, comme en t√©moignent les chiffres en nombre de joueurs et en minutes jou√©es. Cependant, la diversit√© des situations montre que ce n‚Äôest pas uniquement une question de moyens financiers, mais surtout d‚Äôefficacit√© des centres de formation et de la politique sportive adopt√©e. Cette analyse souligne donc l‚Äôimportance de la formation comme facteur cl√© de succ√®s pour les clubs souhaitant valoriser leurs jeunes joueurs sur le long terme
---

### **Question 10 : Quelles √©quipes sont les plus "chanceuses" ou "malchanceuses" ? **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 11 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 12 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}


```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 13 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 14 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 15 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 16 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 17 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 18 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 19 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  

---

### **Question 20 : **

#### üéØ Objectif:


#### üß™ Hypoth√®se :



```{r}

```


#### üß† Interpr√©tation du graphique:


‚úÖ **Conclusion** :  



